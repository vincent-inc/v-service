{
    "sourceFile": "src/app/login/login.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1682630055438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1682630253038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,16 @@\n import { Component, OnInit } from '@angular/core';\n+import { environment } from 'src/environments/environment.prod';\n \n @Component({\n   selector: 'app-login',\n   templateUrl: './login.component.html',\n   styleUrls: ['./login.component.scss']\n })\n export class LoginComponent implements OnInit {\n \n+  src: string = `${environment.v_console}/login`;\n+\n   constructor() { }\n \n   ngOnInit() {\n   }\n"
                },
                {
                    "date": 1682630720525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n   styleUrls: ['./login.component.scss']\n })\n export class LoginComponent implements OnInit {\n \n-  src: string = `${environment.v_console}/login`;\n+  src: string = `http://192.168.1.105:83/login`;\n \n   constructor() { }\n \n   ngOnInit() {\n"
                },
                {
                    "date": 1682630729374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n   styleUrls: ['./login.component.scss']\n })\n export class LoginComponent implements OnInit {\n \n-  src: string = `http://192.168.1.105:83/login`;\n+  src: string = \"http://192.168.1.105:83/login\";\n \n   constructor() { }\n \n   ngOnInit() {\n"
                },
                {
                    "date": 1682630737685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n   styleUrls: ['./login.component.scss']\n })\n export class LoginComponent implements OnInit {\n \n-  src: string = \"http://192.168.1.105:83/login\";\n+  src: string = `${environment.v_console}/login`;\n \n   constructor() { }\n \n   ngOnInit() {\n"
                },
                {
                    "date": 1682700735525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,50 @@\n import { Component, OnInit } from '@angular/core';\n-import { environment } from 'src/environments/environment.prod';\n+import { FormBuilder, FormGroup, Validators } from '@angular/forms';\n+import { Router } from '@angular/router';\n+import { AuthenticatorService } from '../shared/service/Authenticator.service';\n+import { first } from 'rxjs';\n \n @Component({\n   selector: 'app-login',\n   templateUrl: './login.component.html',\n   styleUrls: ['./login.component.scss']\n })\n export class LoginComponent implements OnInit {\n \n-  src: string = `${environment.v_console}/login`;\n+  loginForm!: FormGroup;\n \n-  constructor() { }\n+  error: string = '';\n \n-  ngOnInit() {\n+  constructor(private fb: FormBuilder, private router: Router, private authenticatorService: AuthenticatorService) { }\n+\n+  ngOnInit(): void \n+  {\n+    this.authenticatorService.isLoginCallWithReroute(\"/home\");\n+    this.loginForm = this.fb.group(\n+      {\n+        username: ['', [Validators.required]],\n+        password: ['', [Validators.required]]\n+      }\n+    )\n   }\n+  \n+  login()\n+  {\n+    this.authenticatorService.login(this.loginForm.value).pipe(first()).subscribe(\n+      async res => {\n+        await this.authenticatorService.autoUpdateUserWithJwt(res.jwt); \n+        this.router.navigate(['home'])\n+      },\n+      error => {this.error = 'invalid or wrong username or password'}\n+    );\n+  }\n \n+  healthCheck(): void {\n+    this.authenticatorService.healthCheck().pipe(first()).subscribe(\n+      res => {\n+        console.log(res);\n+      }\n+    );\n+  }\n+\n }\n"
                }
            ],
            "date": 1682630055438,
            "name": "Commit-0",
            "content": "import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n"
        }
    ]
}